# ç¼–è¯‘é”™è¯¯ä¿®å¤æŒ‡å—

## âŒ é”™è¯¯ä¿¡æ¯

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile 
(default-compile) on project AiTestProject: Fatal error compiling: æ— æ•ˆçš„æ ‡è®°: --release
```

## ğŸ” é—®é¢˜åŸå› 

è¿™ä¸ªé”™è¯¯é€šå¸¸ç”±ä»¥ä¸‹å‡ ä¸ªåŸå› å¼•èµ·ï¼š

1. **Maven ç‰ˆæœ¬å¤ªä½** - ä¸æ”¯æŒ `--release` å‚æ•°
2. **JDK é…ç½®é—®é¢˜** - JAVA_HOME æŒ‡å‘é”™è¯¯
3. **ç¼–è¯‘å™¨æ’ä»¶é…ç½®** - é…ç½®å‚æ•°ä¸å…¼å®¹

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. æ£€æŸ¥ Maven ç‰ˆæœ¬ï¼ˆæœ€é‡è¦ï¼‰

```bash
mvn -version
```

**éœ€è¦çš„ç‰ˆæœ¬**: Maven â‰¥ 3.6.0

å¦‚æœç‰ˆæœ¬å¤ªä½ï¼Œè¯·å‡çº§ Mavenï¼š

#### Windows
```powershell
# 1. ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ Maven
# https://maven.apache.org/download.cgi

# 2. è§£å‹åˆ° C:\Program Files\Apache\maven

# 3. è®¾ç½®ç¯å¢ƒå˜é‡
setx M2_HOME "C:\Program Files\Apache\maven"
setx PATH "%M2_HOME%\bin;%PATH%"

# 4. é‡å¯ç»ˆç«¯å¹¶éªŒè¯
mvn -version
```

#### Linux/Mac
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install maven

# macOS
brew install maven

# éªŒè¯
mvn -version
```

### 2. æ£€æŸ¥ JDK é…ç½®

```bash
# æ£€æŸ¥ Java ç‰ˆæœ¬
java -version
# åº”è¯¥æ˜¾ç¤º: java version "17.x.x"

# æ£€æŸ¥ JAVA_HOME
echo %JAVA_HOME%  # Windows
echo $JAVA_HOME   # Linux/Mac
# åº”è¯¥æŒ‡å‘ JDK 17 å®‰è£…ç›®å½•
```

**å¦‚æœä¸æ­£ç¡®ï¼Œè®¾ç½® JAVA_HOME**ï¼š

#### Windows
```powershell
# æ‰¾åˆ° JDK 17 å®‰è£…ç›®å½•
dir "C:\Program Files\Java"

# è®¾ç½® JAVA_HOME
setx JAVA_HOME "C:\Program Files\Java\jdk-17"
setx PATH "%JAVA_HOME%\bin;%PATH%"

# é‡å¯ç»ˆç«¯
```

#### Linux/Mac
```bash
# æ‰¾åˆ° JDK ä½ç½®
/usr/libexec/java_home -V  # macOS
update-alternatives --config java  # Linux

# è®¾ç½® JAVA_HOME (æ·»åŠ åˆ° ~/.bashrc æˆ– ~/.zshrc)
export JAVA_HOME=/path/to/jdk-17
export PATH=$JAVA_HOME/bin:$PATH

# é‡æ–°åŠ è½½é…ç½®
source ~/.bashrc  # æˆ– source ~/.zshrc
```

### 3. å·²ä¿®å¤çš„ pom.xml é…ç½®

æˆ‘å·²ç»æ›´æ–°äº† `pom.xml`ï¼Œä½¿ç”¨æ›´å…¼å®¹çš„é…ç½®ï¼š

#### Properties éƒ¨åˆ†
```xml
<properties>
    <java.version>17</java.version>
    <maven.compiler.source>17</maven.compiler.source>
    <maven.compiler.target>17</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
</properties>
```

#### ç¼–è¯‘å™¨æ’ä»¶éƒ¨åˆ†
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.11.0</version>
    <configuration>
        <source>17</source>
        <target>17</target>
        <encoding>UTF-8</encoding>
        <compilerArgs>
            <arg>-parameters</arg>
        </compilerArgs>
        <annotationProcessorPaths>
            <path>
                <groupId>org.projectlombok</groupId>
                <artifactId>lombok</artifactId>
                <version>${lombok.version}</version>
            </path>
        </annotationProcessorPaths>
    </configuration>
</plugin>
```

### 4. æ¸…ç†å¹¶é‡æ–°ç¼–è¯‘

```bash
# 1. æ¸…ç†æ—§çš„ç¼–è¯‘æ–‡ä»¶
mvn clean

# 2. åˆ é™¤æœ¬åœ°ä»“åº“ç¼“å­˜ï¼ˆå¯é€‰ï¼Œå¦‚æœé—®é¢˜æŒç»­ï¼‰
rm -rf ~/.m2/repository/org/springframework  # Linux/Mac
rmdir /s /q %USERPROFILE%\.m2\repository\org\springframework  # Windows

# 3. å¼ºåˆ¶æ›´æ–°ä¾èµ–å¹¶ç¼–è¯‘
mvn clean compile -U

# 4. å¦‚æœè¿˜æœ‰é—®é¢˜ï¼ŒæŸ¥çœ‹è¯¦ç»†æ—¥å¿—
mvn clean compile -X
```

## ğŸ¯ å®Œæ•´çš„éªŒè¯æ­¥éª¤

### æ­¥éª¤ 1: éªŒè¯ç¯å¢ƒ
```bash
# 1. Java ç‰ˆæœ¬
java -version
# âœ… åº”è¯¥æ˜¾ç¤º: openjdk version "17.x.x" æˆ– java version "17.x.x"

# 2. Maven ç‰ˆæœ¬
mvn -version
# âœ… åº”è¯¥æ˜¾ç¤º: Apache Maven 3.6.x æˆ–æ›´é«˜

# 3. JAVA_HOME
echo %JAVA_HOME%  # Windows
echo $JAVA_HOME   # Linux/Mac
# âœ… åº”è¯¥æŒ‡å‘ JDK 17 ç›®å½•
```

### æ­¥éª¤ 2: æ¸…ç†é¡¹ç›®
```bash
cd d:\cuixing-project\AiTestProject
mvn clean
```

### æ­¥éª¤ 3: ç¼–è¯‘é¡¹ç›®
```bash
mvn compile
```

**æœŸå¾…è¾“å‡º**ï¼š
```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  XX.XXX s
[INFO] Finished at: 2025-10-29T15:XX:XX+08:00
[INFO] ------------------------------------------------------------------------
```

### æ­¥éª¤ 4: æ‰“åŒ…é¡¹ç›®
```bash
mvn package
```

## ğŸ”§ é«˜çº§æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: Maven Wrapper é—®é¢˜

å¦‚æœé¡¹ç›®ä½¿ç”¨ Maven Wrapper (`mvnw`)ï¼Œç¡®ä¿å®ƒæ˜¯æœ€æ–°ç‰ˆæœ¬ï¼š

```bash
# åˆ é™¤æ—§çš„ wrapper
rm -rf .mvn/wrapper  # Linux/Mac
rmdir /s /q .mvn\wrapper  # Windows

# é‡æ–°ç”Ÿæˆ wrapper
mvn wrapper:wrapper -Dmaven=3.9.6
```

### é—®é¢˜ 2: IDE é…ç½®é—®é¢˜

#### IntelliJ IDEA
1. File â†’ Project Structure
2. Project Settings â†’ Project
   - SDK: é€‰æ‹© JDK 17
   - Language level: 17
3. Settings â†’ Build, Execution, Deployment â†’ Build Tools â†’ Maven
   - Maven home directory: æŒ‡å‘ Maven å®‰è£…ç›®å½•
   - JRE: é€‰æ‹© JDK 17

#### Eclipse
1. Window â†’ Preferences â†’ Java â†’ Installed JREs
   - æ·»åŠ  JDK 17 å¹¶è®¾ä¸ºé»˜è®¤
2. Window â†’ Preferences â†’ Maven
   - Installations: æ·»åŠ å¤–éƒ¨ Maven
   - User Settings: æŒ‡å‘ settings.xml

### é—®é¢˜ 3: ç½‘ç»œ/ä»£ç†é—®é¢˜

å¦‚æœä¾èµ–ä¸‹è½½å¤±è´¥ï¼Œé…ç½® Maven ä»£ç†ï¼š

ç¼–è¾‘ `~/.m2/settings.xml` (Linux/Mac) æˆ– `%USERPROFILE%\.m2\settings.xml` (Windows)ï¼š

```xml
<settings>
    <proxies>
        <proxy>
            <id>your-proxy</id>
            <active>true</active>
            <protocol>http</protocol>
            <host>proxy.example.com</host>
            <port>8080</port>
        </proxy>
    </proxies>
</settings>
```

### é—®é¢˜ 4: ä¾èµ–å†²çª

```bash
# æŸ¥çœ‹ä¾èµ–æ ‘
mvn dependency:tree

# è§£å†³ä¾èµ–å†²çª
mvn dependency:resolve
```

## ğŸ“‹ å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ

### é”™è¯¯ 1: "æ— æ•ˆçš„æ ‡è®°: --release"
**åŸå› **: Maven ç‰ˆæœ¬å¤ªä½  
**è§£å†³**: å‡çº§ Maven åˆ° â‰¥ 3.6.0

### é”™è¯¯ 2: "Source option 17 is no longer supported"
**åŸå› **: JDK ç‰ˆæœ¬ä¸æ˜¯ 17  
**è§£å†³**: ç¡®ä¿ JAVA_HOME æŒ‡å‘ JDK 17

### é”™è¯¯ 3: "package jakarta.persistence does not exist"
**åŸå› **: ä¾èµ–æœªä¸‹è½½  
**è§£å†³**: `mvn clean install -U`

### é”™è¯¯ 4: "Failed to execute goal ... maven-compiler-plugin"
**åŸå› **: æ’ä»¶ç‰ˆæœ¬æˆ–é…ç½®é—®é¢˜  
**è§£å†³**: ç¡®ä¿ä½¿ç”¨æ›´æ–°åçš„ pom.xml

## ğŸ¯ å¿«é€Ÿè¯Šæ–­å‘½ä»¤

è¿è¡Œè¿™ä¸ªè„šæœ¬æ¥å¿«é€Ÿè¯Šæ–­ç¯å¢ƒï¼š

### Windows (PowerShell)
```powershell
Write-Host "=== ç¯å¢ƒè¯Šæ–­ ===" -ForegroundColor Green

Write-Host "`n1. Java ç‰ˆæœ¬:" -ForegroundColor Yellow
java -version

Write-Host "`n2. Maven ç‰ˆæœ¬:" -ForegroundColor Yellow
mvn -version

Write-Host "`n3. JAVA_HOME:" -ForegroundColor Yellow
echo $env:JAVA_HOME

Write-Host "`n4. Maven ç¼–è¯‘æµ‹è¯•:" -ForegroundColor Yellow
cd d:\cuixing-project\AiTestProject
mvn clean compile -DskipTests
```

### Linux/Mac (Bash)
```bash
#!/bin/bash
echo "=== ç¯å¢ƒè¯Šæ–­ ==="

echo -e "\n1. Java ç‰ˆæœ¬:"
java -version

echo -e "\n2. Maven ç‰ˆæœ¬:"
mvn -version

echo -e "\n3. JAVA_HOME:"
echo $JAVA_HOME

echo -e "\n4. Maven ç¼–è¯‘æµ‹è¯•:"
cd ~/cuixing-project/AiTestProject
mvn clean compile -DskipTests
```

## âœ… æˆåŠŸæ ‡å¿—

å½“æ‚¨çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºæ—¶ï¼Œè¡¨ç¤ºç¼–è¯‘æˆåŠŸï¼š

```
[INFO] Compiling 14 source files with javac [debug target 17] to target\classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
```

ç„¶åå¯ä»¥è¿è¡Œï¼š
```bash
mvn spring-boot:run
```

## ğŸ†˜ ä»ç„¶æ— æ³•è§£å†³ï¼Ÿ

### 1. æŸ¥çœ‹å®Œæ•´æ—¥å¿—
```bash
mvn clean compile -X > build.log 2>&1
```
ç„¶åæ£€æŸ¥ `build.log` æ–‡ä»¶

### 2. éªŒè¯ JDK å®‰è£…
```bash
# Windows
dir "%JAVA_HOME%\bin\javac.exe"

# Linux/Mac
ls -l $JAVA_HOME/bin/javac
```

### 3. å°è¯•ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ JDK
ä¸´æ—¶æµ‹è¯•ï¼š
```bash
# è®¾ç½®ä¸´æ—¶ JAVA_HOME
set JAVA_HOME=C:\Program Files\Java\jdk-17  # Windows
export JAVA_HOME=/path/to/jdk-17  # Linux/Mac

# ç¼–è¯‘
mvn clean compile
```

---

**å¦‚æœé—®é¢˜æŒç»­å­˜åœ¨ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯**ï¼š
1. `mvn -version` çš„å®Œæ•´è¾“å‡º
2. `java -version` çš„å®Œæ•´è¾“å‡º
3. `echo $JAVA_HOME` çš„è¾“å‡º
4. `mvn clean compile -X` çš„å®Œæ•´æ—¥å¿—

**ä¿®å¤æ—¥æœŸ**: 2025-10-29  
**é—®é¢˜ç±»å‹**: Maven ç¼–è¯‘å™¨é…ç½®  
**è§£å†³æ–¹æ¡ˆ**: æ›´æ–° pom.xml + éªŒè¯ç¯å¢ƒé…ç½®


